# ğŸ³ ä»Šæ—¥å­¦ä¹ è®°å½•ï¼šDocker & Docker Compose åŸºç¡€å®è·µ

> ğŸ“… æ—¥æœŸï¼š2025-11-09  
> âœï¸ ä½œè€…ï¼š**RicerChen**  
> ğŸ¯ ä¸»é¢˜ï¼šç†è§£å®¹å™¨åŒ–ä¸å¤šæœåŠ¡ç¼–æ’ â€”â€” é£ä¹¦ Agent éƒ¨ç½²å‡†å¤‡

---

## ğŸš€ ä¸€ã€å­¦ä¹ èƒŒæ™¯

æˆ‘æ­£åœ¨ä¸º **JobForest ç¤¾åŒº**ï¼ˆä¸€ä¸ªä¸“æ³¨äºæ‰“ç ´å·¥ä½œä¿¡æ¯å·®çš„ç¤¾åŒºï¼‰å¼€å‘ä¸€æ¬¾ **é£ä¹¦ Agentï¼ˆFeishu Agentï¼‰**ï¼Œ
ç”¨äºè‡ªåŠ¨æ”¶é›†ã€æ•´åˆå¹¶æ¨é€å·¥ä½œæœºä¼šä¸çŸ¥è¯†æµã€‚

åœ¨æ­å»º Agent çš„è¿‡ç¨‹ä¸­ï¼ŒLangBot å®˜æ–¹æ–‡æ¡£æŒ‡å‡ºéœ€è¦å…ˆæŒæ¡ï¼š  
1. Docker ä¸ Docker Compose çš„ä½¿ç”¨ï¼›  
2. Docker å®¹å™¨é—´ç½‘ç»œé€šä¿¡é…ç½®æ–¹å¼ã€‚

å› æ­¤ï¼Œæˆ‘ç³»ç»Ÿå­¦ä¹ äº†è¿™ä¸¤ä¸ªéƒ¨åˆ†ï¼Œé˜…è¯»äº†èœé¸Ÿæ•™ç¨‹ï¼š  
- [Docker æ•™ç¨‹](https://www.runoob.com/docker/docker-tutorial.html)  
- [Docker Compose æ•™ç¨‹](https://www.runoob.com/docker/docker-compose.html)  
å¹¶æ•´ç†å¦‚ä¸‹ç¬”è®°ä¸å¿ƒå¾—ã€‚

---

## ğŸ§© äºŒã€Docker æ ¸å¿ƒæ¦‚å¿µæ€»ç»“

| æ¦‚å¿µ | å«ä¹‰ | ç±»æ¯”ç†è§£ |
|------|------|----------|
| **é•œåƒ (Image)** | è¿è¡Œå®¹å™¨çš„æ¨¡æ¿ï¼ŒåŒ…å«åº”ç”¨åŠä¾èµ– | â€œè“å›¾ / æ¨¡æ¿â€ |
| **å®¹å™¨ (Container)** | é•œåƒçš„è¿è¡Œå®ä¾‹ | â€œéš”ç¦»çš„å°ä¸–ç•Œâ€ |
| **å· (Volume)** | æŒ‚è½½åœ¨å®¿ä¸»æœºå’Œå®¹å™¨ä¹‹é—´çš„æ•°æ®åŒºåŸŸ | â€œå…±äº«Uç›˜â€ |
| **ç«¯å£æ˜ å°„ (-p)** | æš´éœ²å®¹å™¨æœåŠ¡ç»™å¤–éƒ¨ | `-p 8080:80` è¡¨ç¤ºæœ¬åœ°8080 â†’ å®¹å™¨80ç«¯å£ |
| **ç¯å¢ƒå˜é‡ (ENV)** | è¿è¡Œæ—¶ä¼ å…¥é…ç½® | åŠ¨æ€æ³¨å…¥å¯†ç /APIå¯†é’¥ç­‰ |

Docker å¸¦æ¥çš„ä¸‰å¤§ä»·å€¼ï¼š  
- **ç¯å¢ƒä¸€è‡´æ€§**ï¼šä¸åŒæœºå™¨ä¸Šéƒ½èƒ½è·‘ï¼›  
- **éš”ç¦»æ€§**ï¼šäº’ä¸å½±å“ï¼›  
- **å¯å¤ç°æ€§**ï¼šæ‰“åŒ…ä¸€æ¬¡ï¼Œåˆ°å¤„è¿è¡Œã€‚

---

## ğŸ§± ä¸‰ã€Docker Compose å­¦ä¹ è¦ç‚¹

### ğŸ—‚ï¸ 1. Compose æ˜¯ä»€ä¹ˆ
> **Compose** æ˜¯ä¸€ä¸ªç”¨ YAML æ–‡ä»¶å®šä¹‰å’Œè¿è¡Œ**å¤šå®¹å™¨åº”ç”¨**çš„å·¥å…·ã€‚

ä¸€å¥å‘½ä»¤å³å¯å¯åŠ¨å®Œæ•´ç³»ç»Ÿï¼š
```bash
docker compose up -d
```

---

### âš™ï¸ 2. æ–‡ä»¶ç»“æ„ç¤ºä¾‹

```yaml
version: "3.9"
services:
  web:
    image: nginx:latest
    ports:
      - "8080:80"
  db:
    image: postgres:15
    environment:
      - POSTGRES_USER=admin
      - POSTGRES_PASSWORD=1234
volumes:
  db_data:
```

#### å¸¸è§å­—æ®µè§£æï¼š

| å­—æ®µ | å«ä¹‰ |
|------|------|
| `version` | Compose æ–‡ä»¶ç‰ˆæœ¬ |
| `services` | å®šä¹‰å¤šä¸ªå®¹å™¨ï¼ˆæœåŠ¡ï¼‰ |
| `image` / `build` | æŒ‡å®šé•œåƒæˆ–æ„å»ºè·¯å¾„ |
| `ports` | ç«¯å£æ˜ å°„ |
| `environment` | ç¯å¢ƒå˜é‡ |
| `volumes` | æ•°æ®å·æŒ‚è½½ |
| `depends_on` | å¯åŠ¨ä¾èµ– |
| `networks` | è‡ªå®šä¹‰å®¹å™¨ç½‘ç»œ |

---

### ğŸ§  3. å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤ | ä½œç”¨ |
|------|------|
| `docker compose up -d` | å¯åŠ¨æœåŠ¡ï¼ˆåå°æ¨¡å¼ï¼‰ |
| `docker compose down` | åœæ­¢å¹¶æ¸…ç† |
| `docker compose ps` | æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ |
| `docker compose logs -f` | å®æ—¶æ—¥å¿— |
| `docker compose exec <service> bash` | è¿›å…¥å®¹å™¨ç»ˆç«¯ |

---

## ğŸŒ å››ã€å®¹å™¨é—´ç½‘ç»œé€šä¿¡

- Compose ä¼šä¸ºåº”ç”¨è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¸“å±ç½‘ç»œï¼›  
- æ‰€æœ‰å®¹å™¨å¯é€šè¿‡**æœåŠ¡åäº’ç›¸è®¿é—®**ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½® IPã€‚  

ä¾‹å¦‚ï¼š
```bash
curl http://db:5432
```
è¿™æ ·å°±èƒ½ç›´æ¥è®¿é—®åä¸º `db` çš„æ•°æ®åº“å®¹å™¨ã€‚

ğŸ“Œ å¯¹æˆ‘å½“å‰çš„ Feishu Agent é¡¹ç›®è€Œè¨€ï¼Œè¿™æ„å‘³ç€ï¼š  
> Agent æœåŠ¡å’Œ LangBot æœåŠ¡å¯ä»¥è‡ªç„¶é€šä¿¡ï¼Œ  
> ä¸éœ€è¦å…³å¿ƒ IP ä¸ç«¯å£çš„ç»‘å®šé—®é¢˜ã€‚

---

## ğŸ’¾ äº”ã€æ•°æ®å·ä¸æŒä¹…åŒ–

é˜²æ­¢æ•°æ®å› å®¹å™¨é‡å¯è€Œä¸¢å¤±ã€‚

```yaml
volumes:
  - db_data:/var/lib/postgresql/data
volumes:
  db_data:
```

å³ä½¿å®¹å™¨é”€æ¯ï¼Œå·å†…æ•°æ®ä»ç„¶ä¿ç•™ã€‚

---

## ğŸ§° å…­ã€ä»Šæ—¥å®è·µä»»åŠ¡

âœ… æˆ‘æ­å»ºäº†ä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„ Docker Compose ç¤ºä¾‹ï¼š

```yaml
version: "3.9"
services:
  web:
    image: nginx
    ports:
      - "8080:80"
```

è¿è¡Œå‘½ä»¤ï¼š
```bash
docker compose up -d
```

ç»“æœï¼š  
- è®¿é—® `http://localhost:8080`  
- æˆåŠŸçœ‹åˆ° **Nginx æ¬¢è¿é¡µ**

**æ”¶è·ï¼š**  
- æŒæ¡é•œåƒ â†’ å®¹å™¨ â†’ Compose çš„å®Œæ•´æµç¨‹ï¼›  
- ç†è§£ç«¯å£æ˜ å°„ã€ç½‘ç»œé€šä¿¡ã€å·æŒ‚è½½ï¼›  
- ä¸º Feishu Agent ä¸ LangBot çš„å®¹å™¨åŒ–éƒ¨ç½²æ‰“ä¸‹åŸºç¡€ã€‚

---

## ğŸ’¡ ä¸ƒã€ä¸ºä»€ä¹ˆè¦å­¦è¿™äº›

| ç›®æ ‡ | æ„ä¹‰ |
|------|------|
| ğŸ§± **è‡ªåŠ¨åŒ–éƒ¨ç½²** | ä¸€æ¡å‘½ä»¤å¯åŠ¨æ•´å¥—ç³»ç»Ÿ |
| ğŸ”Œ **å®¹å™¨äº’é€š** | æœåŠ¡åå³ä¸»æœºåï¼Œç½‘ç»œè‡ªç®¡ç† |
| ğŸ’¾ **æŒä¹…åŒ–æ•°æ®** | é‡å¯åæ•°æ®ä»åœ¨ |
| ğŸ¤ **åä½œç»Ÿä¸€** | ä»–äººå…‹éš†é¡¹ç›®å³å¯è¿è¡Œä¸€è‡´ç¯å¢ƒ |
| â˜ï¸ **å¯æ‰©å±•éƒ¨ç½²** | æ”¯æŒäº‘å¹³å°ç›´æ¥åŠ è½½ Docker é…ç½® |

---

## ğŸ“˜ å…«ã€åç»­è®¡åˆ’

1. å°†é£ä¹¦ Agentï¼ˆPythonï¼‰ä¸ LangBotï¼ˆNode.jsï¼‰åˆ†åˆ«å®¹å™¨åŒ–ï¼›  
2. ç”¨ `docker-compose.yml` å®ç°ä¸€é”®å¯åŠ¨å…¨ç³»ç»Ÿï¼›  
3. æ·»åŠ æ•°æ®åº“ï¼ˆPostgreSQL / Redisï¼‰æ”¯æŒï¼›  
4. ä½¿ç”¨ GitHub Actions è‡ªåŠ¨åŒ–éƒ¨ç½²åˆ°äº‘ç«¯ã€‚

---

## ğŸ’¬ ä¹ã€ç»™åæ¥è€…çš„å»ºè®®

> Docker æ˜¯ç°ä»£å¼€å‘çš„é€šç”¨è¯­è¨€ã€‚  
> å®ƒè®©ä½ çš„é¡¹ç›®ä»â€œèƒ½è·‘â€å˜æˆâ€œå¯å¤ç°ã€å¯æ‰©å±•ã€å¯åˆ†äº«â€ã€‚

å¦‚æœä½ ä¹Ÿåœ¨æ­å»ºæ™ºèƒ½ Agentã€Bot æˆ– SaaS åº”ç”¨ï¼Œ  
**å…ˆç†è§£ Dockerï¼Œå†å†™ä»£ç **ï¼Œä½ ä¼šçœä¸‹æ— æ•°é…ç½®æ—¶é—´ã€‚

---

## ğŸ§  åã€æ€»ç»“ä¸€å¥è¯

> â€œç”¨ Docker å°è£…çš„ä¸åªæ˜¯ç¨‹åºï¼Œè¿˜æœ‰ç¨³å®šä¸åä½œçš„å¯èƒ½æ€§ã€‚â€  
> â€”â€” by **RicerChen**

---
